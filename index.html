<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bo Ti - Embedded Software Developer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap" rel="stylesheet">
    <script>
        (function(){var t=localStorage.getItem('theme');if(t!=='dark')document.documentElement.setAttribute('data-theme','light');})();
    </script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ---- TRACKS ORBITAL ANIMATION ---- */
        .tracks-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0.5rem 0 1.5rem;
            overflow: hidden;
            position: relative;
            min-height: 500px;
        }

        .tracks-scene {
            position: relative;
            width: 700px;
            height: 400px;
            flex-shrink: 0;
            z-index: 1;
            transform: translateY(40px);
            transition: transform 0.45s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .tracks-scene.scene-hovered {
            transform: translateY(-20px);
        }

        .orbit-ring {
            position: absolute;
            border-radius: 50%;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scaleY(0.259);
        }

        /* Main orbit ring — dashed with subtle glow */
        .orbit-ring-main {
            border: 1.5px dashed rgba(56,189,248,0.18);
            box-shadow: 0 0 25px rgba(56,189,248,0.06);
        }

        /* Secondary orbit rings — thin solid, decorative */
        .orbit-ring-inner {
            border: 1px solid rgba(240,160,48,0.12);
        }
        .orbit-ring-outer {
            border: 1px solid rgba(56,189,248,0.08);
        }

        .center-node {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background:
                radial-gradient(circle at 40% 35%, rgba(255,255,255,0.2) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(240,160,48,0.45), rgba(240,120,30,0.15) 55%, rgba(10,14,23,0.5));
            border: 1.5px solid rgba(240,160,48,0.35);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            box-shadow:
                0 0 40px rgba(240,160,48,0.3),
                0 0 80px rgba(240,120,30,0.12),
                inset 0 0 25px rgba(240,160,48,0.12);
            animation: center-pulse 4s ease-in-out infinite;
        }

        @keyframes center-pulse {
            0%, 100% { box-shadow: 0 0 40px rgba(240,160,48,0.3), 0 0 80px rgba(240,120,30,0.12), inset 0 0 25px rgba(240,160,48,0.12); }
            50% { box-shadow: 0 0 50px rgba(240,160,48,0.38), 0 0 100px rgba(240,120,30,0.18), inset 0 0 30px rgba(240,160,48,0.18); }
        }

        .node-label {
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: #f0a030;
            font-family: var(--font-display);
        }

        .node-title {
            font-size: 1.3rem;
            font-weight: 800;
            margin-top: 2px;
            color: #e8ecf0;
        }

        .track {
            position: absolute;
            top: 50%; left: 50%;
            width: 130px;
            height: 130px;
            margin-left: -65px;
            margin-top: -65px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.18);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            cursor: pointer;
            z-index: 5;
            text-align: center;
            padding: 12px;
            will-change: transform, opacity;
            overflow: hidden;
            /* Liquid glass: translucent with colored tint */
            background:
                radial-gradient(circle at 30% 25%, rgba(255,255,255,0.25) 0%, transparent 50%),
                radial-gradient(circle at 70% 75%, var(--planet-lo, rgba(10,20,40,0.3)) 0%, transparent 60%),
                radial-gradient(circle at 50% 50%, var(--planet-hi, rgba(80,180,240,0.25)), var(--planet-mid, rgba(40,100,160,0.15)) 60%, var(--planet-lo, rgba(10,40,70,0.2)) 100%);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow:
                inset 0 1px 2px rgba(255,255,255,0.2),
                inset 0 -4px 12px rgba(0,0,0,0.15),
                0 4px 24px rgba(0,0,0,0.25),
                0 0 25px var(--card-glow, rgba(56,189,248,0.15));
            transition: box-shadow 0.3s ease, border-color 0.3s ease;
        }

        /* Specular highlight — liquid glass caustic */
        .track::before {
            content: '';
            position: absolute;
            top: 6%;
            left: 12%;
            width: 40%;
            height: 28%;
            background: radial-gradient(ellipse,
                rgba(255,255,255,0.4) 0%,
                rgba(255,255,255,0.12) 40%,
                transparent 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            filter: blur(2px);
        }

        /* Atmosphere rim — glass edge refraction */
        .track::after {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.15);
            pointer-events: none;
            z-index: 0;
            box-shadow:
                0 0 18px var(--card-glow, transparent),
                inset 0 0 14px rgba(255,255,255,0.06);
        }

        .track-active,
        .track:hover {
            transform: scale(1.18) !important;
            opacity: 1 !important;
            border-color: rgba(255,255,255,0.22);
            box-shadow:
                inset 0 1px 2px rgba(255,255,255,0.2),
                inset 0 -4px 14px rgba(0,0,0,0.15),
                0 4px 24px rgba(0,0,0,0.3),
                0 0 45px var(--card-glow, rgba(56,189,248,0.3)),
                0 0 90px var(--card-glow, rgba(56,189,248,0.12));
        }

        .track-active::after,
        .track:hover::after {
            border-color: rgba(255,255,255,0.18);
            box-shadow:
                0 0 25px var(--card-glow, transparent),
                inset 0 0 16px rgba(255,255,255,0.06);
        }

        .track-name {
            font-size: 0.88rem;
            font-weight: 700;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            color: #e8ecf0;
            line-height: 1.25;
            position: relative;
            z-index: 1;
            text-shadow: 0 1px 6px rgba(0,0,0,0.7);
        }

        .tracks-tooltip {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: rgba(17,20,30,0.92);
            border: 1px solid rgba(56,189,248,0.15);
            border-radius: 12px;
            padding: 16px 24px;
            max-width: 380px;
            text-align: center;
            z-index: 200;
            opacity: 0;
            transition: opacity 0.35s, transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
            pointer-events: none;
            backdrop-filter: blur(16px);
            box-shadow: 0 4px 30px rgba(0,0,0,0.4), 0 0 20px rgba(56,189,248,0.05);
        }

        .tracks-tooltip.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .tracks-tooltip h3 { font-size: 1.05rem; font-weight: 700; margin-bottom: 6px; }
        .tracks-tooltip p { font-size: 0.78rem; color: var(--text-secondary); font-family: var(--font-display); line-height: 1.6; }

        @media (max-width: 900px) {
            .tracks-scene {
                transform: translateY(40px) scale(0.65);
                transform-origin: top center;
                margin-bottom: -140px;
            }
            .tracks-scene.scene-hovered {
                transform: translateY(-20px) scale(0.65);
            }
            .tracks-wrapper { min-height: 320px; }
        }

        /* ---- LIGHT MODE ORBITAL OVERRIDES ---- */
        [data-theme="light"] .orbit-ring-main {
            border-color: rgba(14,143,208,0.22);
            box-shadow: 0 0 25px rgba(14,143,208,0.08);
        }
        [data-theme="light"] .orbit-ring-inner {
            border-color: rgba(208,138,24,0.18);
        }
        [data-theme="light"] .orbit-ring-outer {
            border-color: rgba(14,143,208,0.12);
        }
        [data-theme="light"] .center-node {
            background:
                radial-gradient(circle at 40% 35%, rgba(255,255,255,0.35) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(208,138,24,0.5), rgba(208,100,20,0.2) 55%, rgba(245,246,250,0.4));
            border-color: rgba(208,138,24,0.4);
            box-shadow:
                0 0 40px rgba(208,138,24,0.25),
                0 0 80px rgba(208,100,20,0.1),
                inset 0 0 25px rgba(208,138,24,0.1);
        }
        [data-theme="light"] .track {
            border-color: rgba(0,0,0,0.12);
            box-shadow:
                inset 0 1px 2px rgba(255,255,255,0.4),
                inset 0 -4px 12px rgba(0,0,0,0.08),
                0 4px 24px rgba(0,0,0,0.12),
                0 0 25px var(--card-glow, rgba(14,143,208,0.1));
        }
        [data-theme="light"] .track::after {
            border-color: rgba(0,0,0,0.08);
        }
        [data-theme="light"] .track-name {
            color: #1a1e2e;
            text-shadow: 0 1px 4px rgba(255,255,255,0.6);
        }
        [data-theme="light"] .node-title {
            color: #1a1e2e;
        }
        [data-theme="light"] .tracks-tooltip {
            background: rgba(255,255,255,0.94);
            border-color: rgba(14,143,208,0.2);
            box-shadow: 0 4px 30px rgba(0,0,0,0.12), 0 0 20px rgba(14,143,208,0.06);
        }
        [data-theme="light"] .tracks-tooltip h3 {
            color: #1a1e2e;
        }

        @media (max-width: 760px) {
            .tracks-scene {
                transform: translateY(30px) scale(0.48);
                transform-origin: top center;
                margin-bottom: -210px;
            }
            .tracks-scene.scene-hovered {
                transform: translateY(-15px) scale(0.48);
            }
            .tracks-wrapper { min-height: 240px; }
        }
    </style>
</head>
<body>
    <!-- Dot-grid background canvas -->
    <canvas id="gridCanvas"></canvas>

    <nav class="navbar" id="navbar">
        <div class="nav-inner">
            <a href="#hero" class="nav-logo">
                <span class="logo-bracket">&lt;</span>Bo Ti<span class="logo-bracket">/&gt;</span>
            </a>
            <ul class="nav-links" id="navLinks">
                <li><a href="#about" data-i18n="nav_about">About</a></li>
                <li><a href="#projects" data-i18n="nav_projects">Projects</a></li>
                <li><a href="#skills" data-i18n="nav_skills">Skills</a></li>
                <li><a href="#experience" data-i18n="nav_experience">Experience</a></li>
                <li><a href="#contact" data-i18n="nav_contact">Contact</a></li>
            </ul>
            <div class="nav-right">
                <button class="theme-toggle" id="themeSwitch" onclick="toggleTheme()" aria-label="Toggle theme">
                    <span class="theme-icon" id="themeIcon">&#9728;</span>
                </button>
                <button class="lang-toggle" id="langSwitch" onclick="toggleLang()" aria-label="Toggle language">
                    <span class="lang-label" id="langLabel">CN</span>
                </button>
                <button class="menu-toggle" id="menuToggle" onclick="toggleMenu()" aria-label="Toggle menu">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <section id="hero" class="hero">
        <div class="hero-content-wrapper">
            <div class="glass-card">
                <p class="hero-greeting" data-i18n="hero_greeting">Hello, my name is</p>
                <h1 class="hero-name">Bo Ti<span class="cursor">_</span></h1>
                <h2 class="hero-title" data-i18n="hero_subtitle">Embedded Software Developer</h2>
                <p class="hero-bio" data-i18n="hero_bio">2nd year Electrical Engineering student at UBC pursuing embedded software development — drivers, firmware, and real-time systems. Experienced in low-level programming with Assembly and C/C++, with scripting proficiency in Python for automation and tooling.</p>
                <div class="hero-actions">
                    <a href="#projects" class="btn btn-primary" data-i18n="hero_btn_work">View My Work</a>
                    <a href="https://github.com/Tibo-vagenBird" class="btn btn-ghost" target="_blank" rel="noopener">GitHub</a>
                    <a href="https://www.linkedin.com/in/tibo-bcece71/" class="btn btn-ghost" target="_blank" rel="noopener">LinkedIn</a>
                </div>
            </div>
            <div class="glass-card glass-card-signal">
                <div class="signal-display">
                    <canvas id="signalCanvas"></canvas>
                </div>
                <div class="signal-label">SYS_READY <span class="blink">●</span></div>
            </div>
        </div>
        <div class="scroll-hint">
            <span data-i18n="scroll_hint">scroll</span>
            <div class="scroll-line"></div>
        </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section">
        <div class="container">
            <div class="section-header">
                <span class="section-index">01</span>
                <h2 class="section-title" data-i18n="about_title">About Me</h2>
                <div class="section-line"></div>
            </div>
            <div class="about-grid">
                <div class="about-text">
                    <p data-i18n="about_p1">2nd year Electrical Engineering student at UBC pursuing embedded software development — drivers, firmware, and real-time systems. Experienced in low-level programming with Assembly and C/C++, with scripting proficiency in Python for automation and tooling.</p>
                    <p data-i18n="about_p2">I focus on embedded software development — writing drivers, firmware, and real-time control systems.
                       My Python experience is in scripting and automation tooling, complementing my core work in low-level systems.</p>
                </div>
                <div class="about-aside">
                    <div class="terminal-card">
                        <div class="terminal-header">
                            <span class="terminal-dot"></span>
                            <span class="terminal-dot"></span>
                            <span class="terminal-dot"></span>
                            <span class="terminal-title">profile.sh</span>
                        </div>
                        <div class="terminal-body">
                            <code>
<span class="t-prompt">$</span> <span class="t-cmd">whoami</span>
<span class="t-output">Bo Ti (倜博)</span>
<span class="t-prompt">$</span> <span class="t-cmd">cat education.txt</span>
<span class="t-output">UBC Electrical Engineering</span>
<span class="t-output">Year 2</span>
<span class="t-prompt">$</span> <span class="t-cmd">cat focus.txt</span>
<span class="t-output">Embedded Software</span>
<span class="t-output">Firmware &amp; Drivers</span>
<span class="t-output">Real-time Systems</span>
<span class="t-prompt">$</span> <span class="cursor">_</span>
                            </code>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="section section-alt">
        <div class="container">
            <div class="section-header">
                <span class="section-index">02</span>
                <h2 class="section-title" data-i18n="projects_title">Projects</h2>
                <div class="section-line"></div>
            </div>
            <div class="projects-list">

                <a href="https://github.com/Elec-291-Group/Reflow-Oven-Controller" class="project-card" target="_blank" rel="noopener">
                    <div class="project-top">
                        <span class="project-label" data-i18n="project_label_featured">Featured Project</span>
                        <svg class="project-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 17L17 7M17 7H7M17 7V17"/></svg>
                    </div>
                    <h3 class="project-name" data-i18n="project1_name">8052 Oven Reflow Controller</h3>
                    <p class="project-desc" data-i18n="project1_desc">A reflow soldering controller written entirely in 8052 Assembly on the DE10-Lite FPGA platform. I designed the pub-sub architecture using bit-addressable memory as a signal bus, wrote all core FSMs (button debouncing, UI updates, timing, and the 7-stage reflow control workflow), and configured timers and interrupts. Mid-project, I reviewed and rewrote 2,500+ lines of code to enforce the pub-sub pattern as new features were merged. The system drives an SSR via soft-PWM with proportional control, supports dual interaction through a 4x4 keypad/LCD hardware interface and a UART-based PC GUI (57600 baud), and includes thermocouple fault detection with emergency shutdown.</p>
                    <div class="project-tech">
                        <span>8052 Assembly</span>
                        <span>Cooperative Multitasking</span>
                        <span>Pub-Sub Architecture</span>
                        <span>FSM Design</span>
                        <span>SSR PWM Control</span>
                        <span>UART</span>
                        <span>DE10-Lite FPGA</span>
                    </div>
                </a>

                <a href="https://github.com/UBC-Rocket/ulysses-ground-control" class="project-card" target="_blank" rel="noopener">
                    <div class="project-top">
                        <span class="project-label" data-i18n="project_label_featured">Featured Project</span>
                        <svg class="project-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 17L17 7M17 7H7M17 7V17"/></svg>
                    </div>
                    <h3 class="project-name" data-i18n="project2_name">Ulysses Ground Control Station</h3>
                    <p class="project-desc" data-i18n="project2_desc">Qt Quick ground control software for UBC Rocket's Ulysses vehicle. Built the C++ backend including the serial interface with the radio modem, alarm receive/processing/display pipeline, and parameter setting logic. Designed and implemented the settings page UI for customizing data display layouts at runtime. The station features a real-time telemetry dashboard with Kalman-filtered orientation, barometric and environmental data, engine control monitoring, a configurable PID controller interface for multiple flight modes, and a radio modem console with single/dual-port modes.</p>
                    <div class="project-tech">
                        <span>C++</span>
                        <span>QML</span>
                        <span>Qt Quick</span>
                        <span>Serial Communication</span>
                        <span>Radio Modem</span>
                    </div>
                </a>

            </div>
        </div>
    </section>

    <!-- SKILLS -->
    <section id="skills" class="section section-alt" style="position:relative;">
        <div class="container">
            <div class="section-header">
                <span class="section-index">03</span>
                <h2 class="section-title" data-i18n="skills_title">Skills</h2>
                <div class="section-line"></div>
            </div>
            <div class="tracks-wrapper">
                <div class="tracks-scene" id="tracksScene">
                    <div class="orbit-ring orbit-ring-inner" style="width:360px;height:360px;"></div>
                    <div class="orbit-ring orbit-ring-main" style="width:580px;height:580px;"></div>
                    <div class="orbit-ring orbit-ring-outer" style="width:760px;height:760px;"></div>
                    <div class="center-node">
                        <span class="node-label" data-i18n="skills_my">My</span>
                        <span class="node-title" data-i18n="skills_node_title">Skills</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="tracks-tooltip" id="tracksTooltip">
            <h3 id="ttTitle"></h3>
            <p id="ttDesc"></p>
        </div>
    </section>

    <!-- EXPERIENCE -->
    <section id="experience" class="section section-alt">
        <div class="container">
            <div class="section-header">
                <span class="section-index">04</span>
                <h2 class="section-title" data-i18n="experience_title">Experience</h2>
                <div class="section-line"></div>
            </div>
            <div class="experience-list">
                <div class="exp-card">
                    <div class="exp-timeline-dot"></div>
                    <div class="exp-period" data-i18n="exp1_period">2025 - Present</div>
                    <div class="exp-body">
                        <h3 class="exp-role" data-i18n="exp1_role">Ground Control Software Engineer — Embedded Interface</h3>
                        <span class="exp-company">UBC Rocket</span>
                        <p class="exp-desc" data-i18n="exp1_desc">Building the ground control station for Ulysses using Qt Quick (C++/QML). Responsible for the C++ backend, radio modem interface, alarm processing, parameter settings, and settings page UI.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section">
        <div class="container">
            <div class="section-header">
                <span class="section-index">05</span>
                <h2 class="section-title" data-i18n="contact_title">Get In Touch</h2>
                <div class="section-line"></div>
            </div>
            <div class="contact-box">
                <p class="contact-text" data-i18n="contact_text">I'm always open to new opportunities and interesting projects.
                   Feel free to reach out!</p>
                <a href="mailto:bti@student.ubc.ca" class="btn btn-primary btn-lg">bti@student.ubc.ca</a>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container footer-inner">
            <p data-i18n="footer_text">&copy; 2026 Bo Ti. Built with Rust &amp; Rocket.</p>
            <p class="footer-sub" data-i18n="footer_claude">Developed purely by Claude Code.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        /* ---- SKILLS ORBITAL ANIMATION ---- */
        (function () {
            var S = 0.0003;
            var R = 290;
            var A = 2 * Math.PI / 7;
            var tracks = [
                { name: "Languages",  nameZh: "\u7f16\u7a0b\u8bed\u8a00", color: "#6eb4ff", glow: "rgba(110,180,255,0.3)",  planetHi: "rgba(100,200,255,0.5)", planetMid: "rgba(50,140,210,0.3)", planetLo: "rgba(20,80,140,0.2)", radius: R, startAngle: A * 0, speed: S, items: ["8052 Assembly", "C/C++", "QML", "Python"], itemsZh: ["8052 \u6c47\u7f16", "C/C++", "QML", "Python"] },
                { name: "Embedded",   nameZh: "\u5d4c\u5165\u5f0f",   color: "#5dffb0", glow: "rgba(93,255,176,0.3)",   planetHi: "rgba(90,230,180,0.5)", planetMid: "rgba(30,160,130,0.3)", planetLo: "rgba(15,90,80,0.2)", radius: R, startAngle: A * 1, speed: S, items: ["FSM Design", "PWM Control", "UART/Serial", "Pub-Sub Architecture", "Cooperative Multitasking", "Timer/Interrupt Config"], itemsZh: ["\u72b6\u6001\u673a\u8bbe\u8ba1", "PWM \u63a7\u5236", "UART/\u4e32\u53e3\u901a\u4fe1", "\u53d1\u5e03-\u8ba2\u9605\u67b6\u6784", "\u534f\u4f5c\u5f0f\u591a\u4efb\u52a1", "\u5b9a\u65f6\u5668/\u4e2d\u65ad\u914d\u7f6e"] },
                { name: "Frameworks", nameZh: "\u6846\u67b6\u4e0e\u5e93", color: "#ff9d5c", glow: "rgba(255,157,92,0.3)",    planetHi: "rgba(255,175,100,0.48)", planetMid: "rgba(200,110,55,0.28)", planetLo: "rgba(120,60,25,0.18)", radius: R, startAngle: A * 2, speed: S, items: ["Qt Quick"], itemsZh: ["Qt Quick"] },
                { name: "Scripting",  nameZh: "\u811a\u672c\u4e0e\u81ea\u52a8\u5316", color: "#ffe066", glow: "rgba(255,224,102,0.3)",   planetHi: "rgba(255,235,110,0.48)", planetMid: "rgba(200,180,70,0.28)", planetLo: "rgba(120,100,30,0.18)", radius: R, startAngle: A * 3, speed: S, items: ["Selenium", "BeautifulSoup", "OpenCV", "NumPy", "Pandas", "Matplotlib"], itemsZh: ["Selenium", "BeautifulSoup", "OpenCV", "NumPy", "Pandas", "Matplotlib"] },
                { name: "Dev Tools",  nameZh: "\u8f6f\u4ef6\u4e0e\u5de5\u5177", color: "#d67eff", glow: "rgba(214,126,255,0.3)",   planetHi: "rgba(200,150,255,0.48)", planetMid: "rgba(140,80,220,0.28)", planetLo: "rgba(70,35,140,0.18)", radius: R, startAngle: A * 4, speed: S, items: ["Quartus", "Qt Creator", "VS Code", "Git", "Office Suite"], itemsZh: ["Quartus", "Qt Creator", "VS Code", "Git", "Office \u5957\u4ef6"] },
                { name: "CAD",        nameZh: "CAD / \u8bbe\u8ba1",   color: "#ff6b6b", glow: "rgba(255,107,107,0.3)",   planetHi: "rgba(255,120,120,0.48)", planetMid: "rgba(200,70,70,0.28)", planetLo: "rgba(120,35,35,0.18)", radius: R, startAngle: A * 5, speed: S, items: ["SolidWorks", "Advanced Surfacing", "Sheet Metal", "Assembly"], itemsZh: ["SolidWorks", "\u9ad8\u7ea7\u66f2\u9762", "\u9499\u91d1", "\u88c5\u914d\u4f53"] },
                { name: "Lab Gear",   nameZh: "\u5b9e\u9a8c\u5ba4\u8bbe\u5907", color: "#38bdf8", glow: "rgba(56,189,248,0.3)",    planetHi: "rgba(85,225,255,0.5)", planetMid: "rgba(30,160,210,0.3)", planetLo: "rgba(15,90,120,0.2)", radius: R, startAngle: A * 6, speed: S, items: ["Logic Analyzer", "Multimeter", "Oscilloscope", "Signal Generator"], itemsZh: ["\u903b\u8f91\u5206\u6790\u4eea", "\u4e07\u7528\u8868", "\u793a\u6ce2\u5668", "\u4fe1\u53f7\u53d1\u751f\u5668"] }
            ];

            var scene   = document.getElementById('tracksScene');
            var tooltip = document.getElementById('tracksTooltip');
            var ttTitle = document.getElementById('ttTitle');
            var ttDesc  = document.getElementById('ttDesc');
            if (!scene) return;

            function getTrackName(t) {
                return currentLang === 'zh' && t.nameZh ? t.nameZh : t.name;
            }
            function getTrackItems(t) {
                return currentLang === 'zh' && t.itemsZh ? t.itemsZh : t.items;
            }

            var elements = tracks.map(function (t) {
                var el = document.createElement('div');
                el.className = 'track';
                el.style.setProperty('--card-color', t.color);
                el.style.setProperty('--card-glow',  t.glow);
                el.style.setProperty('--planet-hi',  t.planetHi);
                el.style.setProperty('--planet-mid', t.planetMid);
                el.style.setProperty('--planet-lo',  t.planetLo);
                el.innerHTML = '<div class="track-name">' + getTrackName(t) + '</div>';
                el.addEventListener('mouseenter', function () {
                    ttTitle.textContent = getTrackName(t);
                    ttTitle.style.color = t.color;
                    ttDesc.textContent  = getTrackItems(t).join(' \u00b7 ');
                    tooltip.classList.add('show');
                    scene.classList.add('scene-hovered');
                });
                el.addEventListener('mouseleave', function () {
                    tooltip.classList.remove('show');
                    scene.classList.remove('scene-hovered');
                });
                scene.appendChild(el);
                return { el: el, track: t, angle: t.startAngle };
            });

            // Expose a function to refresh track labels on language switch
            window.updateSkillsLang = function () {
                elements.forEach(function (item) {
                    item.el.querySelector('.track-name').textContent = getTrackName(item.track);
                });
            };

            var cx = 350, cy = 200;
            var tilt = Math.sin(15 * Math.PI / 180);
            function animateTracks() {
                elements.forEach(function (item) {
                    item.angle += item.track.speed * 16;
                    var x = cx + item.track.radius * Math.cos(item.angle);
                    var y = cy + item.track.radius * Math.sin(item.angle) * tilt;
                    var depth = Math.sin(item.angle);
                    item.el.style.zIndex = Math.round(10 + depth * 8);
                    var s = 0.85 + 0.15 * (depth + 1) / 2;
                    var o = 0.7 + 0.3 * (depth + 1) / 2;
                    item.el.style.transform = 'scale(' + s.toFixed(3) + ')';
                    item.el.style.opacity   = o.toFixed(3);
                    item.el.style.left = x + 'px';
                    item.el.style.top  = y + 'px';
                });
                requestAnimationFrame(animateTracks);
            }
            requestAnimationFrame(animateTracks);

            /* ---- AUTO-CYCLE: independent of user hover ---- */
            var skillsSection = document.getElementById('skills');
            var autoIndex = 0;
            var autoTimer = null;
            var userHovering = false;

            function showPlanet(i) {
                var t = tracks[i];
                ttTitle.textContent = getTrackName(t);
                ttTitle.style.color = t.color;
                ttDesc.textContent  = getTrackItems(t).join(' \u00b7 ');
                tooltip.classList.add('show');
                scene.classList.add('scene-hovered');
                elements.forEach(function (item) { item.el.classList.remove('track-active'); });
                elements[i].el.classList.add('track-active');
            }

            function hidePlanet() {
                tooltip.classList.remove('show');
                scene.classList.remove('scene-hovered');
                elements.forEach(function (item) { item.el.classList.remove('track-active'); });
            }

            function advanceAuto() {
                showPlanet(autoIndex);
                autoIndex = (autoIndex + 1) % tracks.length;
            }

            function resetTimer() {
                if (autoTimer) { clearInterval(autoTimer); autoTimer = null; }
                autoTimer = setInterval(function () {
                    if (!userHovering) advanceAuto();
                }, 5000);
            }

            function startAuto() {
                if (autoTimer) return;
                advanceAuto();
                autoTimer = setInterval(function () {
                    if (!userHovering) advanceAuto();
                }, 5000);
            }

            function stopAuto() {
                if (autoTimer) { clearInterval(autoTimer); autoTimer = null; }
                hidePlanet();
            }

            // User hover: show hovered planet, on leave restore current auto planet & restart 5s
            elements.forEach(function (item, i) {
                item.el.addEventListener('mouseenter', function () {
                    userHovering = true;
                    showPlanet(i);
                });
                item.el.addEventListener('mouseleave', function () {
                    userHovering = false;
                    if (sectionVisible) {
                        hidePlanet();
                        setTimeout(function () {
                            if (!userHovering && sectionVisible) {
                                var current = (autoIndex - 1 + tracks.length) % tracks.length;
                                showPlanet(current);
                                resetTimer();
                            }
                        }, 1500);
                    }
                });
            });

            // IntersectionObserver: start/stop when skills section enters/leaves viewport
            var sectionVisible = false;
            var observer = new IntersectionObserver(function (entries) {
                entries.forEach(function (entry) {
                    sectionVisible = entry.isIntersecting;
                    if (entry.isIntersecting) {
                        startAuto();
                    } else {
                        stopAuto();
                        autoIndex = 0;
                    }
                });
            }, { threshold: 0.3 });
            observer.observe(skillsSection);
        })();
    </script>
</body>
</html>
